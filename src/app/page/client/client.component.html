<app-loading *ngIf="loading"></app-loading>
<div class="mx-3">
  <div class="d-flex pb-3 pt-2">
    <div class="col-10">
      <h1>Listado Cliente</h1>
    </div>
    <div class="col-2 text-end">
      <button class="btn-create" (click)="openModal()">Crear Cliente</button>
    </div>
  </div>
  <div class="table-responsive">
    <table class="table table-hover table-borderless" aria-describedby="">
      <thead>
        <tr>

          <th>Id</th>
          <th>Names</th>
          <th>Apellidos</th>
          <th>Barrio</th>
          <th>Celular</th>
          <th>Direccion</th>
          <th>Medio de Pago</th>
          <th>Observaciones</th>
          <th class="text-center">Status</th>
          <th class="text-center">Acciones</th>
        </tr>
      </thead>
      <tbody *ngIf="showTable">
        <tr class="ng-star-inserted" *ngFor="let item of list">
          <td class="text-uppercase">{{ item.id }}</td>
          <td class="text-uppercase">{{ item.nombres }}</td>
          <td class="text-uppercase">{{ item.apellidos }}</td>
          <td class="text-uppercase">{{ item.barrio }}</td>
          <td class="text-uppercase">{{ item.celular }}</td>
          <td class="text-uppercase">{{ item.direccion }}</td>
          <td class="text-uppercase">{{ item.medioDePago }}</td>
          <td class="text-uppercase">{{ item.observaciones }}</td>
          <td>
            <div
              [ngClass]="item.status ? 'statusActive' : 'statusDesactive'"
            ></div>
          </td>
          <td class="col-1 text-center">
            <i
              class="ti ti-dots-vertical tree-dots"
              (click)="showOverlayPanel($event, item)"
            ></i>
          </td>
        </tr>
      </tbody>
      <tbody *ngIf="squeleto">
        <tr class="ng-star-inserted">
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>

        </tr>
        <tr class="ng-star-inserted">
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
        </tr>
        <tr class="ng-star-inserted">
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
        </tr>
        <tr class="ng-star-inserted">
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
        </tr>
        <tr class="ng-star-inserted">
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
        </tr>
        <tr class="ng-star-inserted">
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
        </tr>
        <tr class="ng-star-inserted">
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
          <td><p-skeleton height="1.5rem"></p-skeleton></td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<p-dialog
  header="  {{ isEdit ? 'Editar' : 'Crear' }}"
  [(visible)]="display" [style]="{ width: '70vw', height: '80vh' }"
  [breakpoints]="{ '960px': '95vw', '640px': '100vw' }"
>
  <div class="row">
    <form action="">
      <div class="row">
        <div class="col-6 mb-3">
          <label for="" class="w-100 fw-bold mb-1">Nombres</label>
          <input
            type="text"
            class="w-100"
            [(ngModel)]="data.nombres"
            name="nombres"
            required
          />
        </div>
        <div class="col-6 mb-3">
          <label for="" class="w-100 fw-bold mb-1">Apellidos</label>
          <input
            type="text"
            class="w-100"
            [(ngModel)]="data.apellidos"
            name="apellidos"
            required
          />
        </div>
        <div class="col-6 mb-3">
          <label for="" class="w-100 fw-bold mb-1">Barrio</label>
          <input
            type="text"
            class="w-100"
            [(ngModel)]="data.barrio"
            name="barrio"
            required
          />
        </div>
        <div class="col-6 mb-3">
          <label for="" class="w-100 fw-bold mb-1">Celular</label>
          <input
            type="text"
            class="w-100"
            [(ngModel)]="data.celular"
            name="celular"
            (input)="validateNumberInput($event)"
            required
          />
        </div>
        <div class="col-6 mb-3">
          <label for="" class="w-100 fw-bold mb-1">Direcci√≥n</label>
          <input
            type="text"
            class="w-100"
            [(ngModel)]="data.direccion"
            name="direccion"
            required
          />
        </div>
     <div class="col-6 mb-3">
  <label for="" class="w-100 fw-bold mb-1" >Medio de Pago</label>
  <select name="aliado" class="form-control" [(ngModel)]="data.medioDePago" >
    <option [ngValue]="'efectivo'">Efectivo</option>
    <option [ngValue]="'online'">Online</option>
  </select>
</div> 

      </div>
    </form>
    <div class="col-12 mb-3">
      <label for="" class="w-100 fw-bold mb-1">Observaciones</label>
      <p-editor
        [(ngModel)]="data.observaciones"
        [style]="{ height: '200px' }"
      ></p-editor>
    </div>

  </div>

  <button class="btn-modal" (click)="isEdit ? edit() : createProduct()">
    {{ isEdit ? "Edit" : "Create" }}
  </button>
</p-dialog>
<p-overlayPanel #overlayPanel>
  <ng-template pTemplate>
    <div class="d-grid">
      <button class="btn-list" (click)="openModal(true)">
        <i class="ti ti-edit"></i> Editar
      </button>
      <button class="btn-list" (click)="changeStatus()">
        <div
          [ngClass]="!data.status ? 'statusActive' : 'statusDesactive'"
    
        ></div>
        {{ data.status ? "Deshabilitar" : "Habilitar" }}
      </button>
    </div>
  </ng-template>
</p-overlayPanel>
